<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>设计复杂的iOS动画效果 - Chars&#39;s Tech Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="动画的世界丰富多彩，令人陶醉

随着工作的深入，其实每个 App 中，最关键的莫过于用户交互，随着技术时代的发展，人们已经不再满足于手指点点碰碰就完成功能。用户更加期待炫酷的操作体验。需要眼前一亮的感觉。这些都是 App 将要解决的问题。而动画交互无疑是最多的一种手段。但是，现在也不是简单动画的天下，需要更多的创意，繁杂而简洁的创意。">
<meta property="og:type" content="article">
<meta property="og:title" content="设计复杂的iOS动画效果">
<meta property="og:url" content="http://charsdavy.github.io/2016/07/31/design-complex-animation-effect/index.html">
<meta property="og:site_name" content="Chars's Tech Blog">
<meta property="og:description" content="动画的世界丰富多彩，令人陶醉

随着工作的深入，其实每个 App 中，最关键的莫过于用户交互，随着技术时代的发展，人们已经不再满足于手指点点碰碰就完成功能。用户更加期待炫酷的操作体验。需要眼前一亮的感觉。这些都是 App 将要解决的问题。而动画交互无疑是最多的一种手段。但是，现在也不是简单动画的天下，需要更多的创意，繁杂而简洁的创意。">
<meta property="og:image" content="http://o88e8any8.bkt.clouddn.com/iOS_animate_effect.png?imageView/2/w/700">
<meta property="og:updated_time" content="2016-08-06T03:32:16.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="设计复杂的iOS动画效果">
<meta name="twitter:description" content="动画的世界丰富多彩，令人陶醉

随着工作的深入，其实每个 App 中，最关键的莫过于用户交互，随着技术时代的发展，人们已经不再满足于手指点点碰碰就完成功能。用户更加期待炫酷的操作体验。需要眼前一亮的感觉。这些都是 App 将要解决的问题。而动画交互无疑是最多的一种手段。但是，现在也不是简单动画的天下，需要更多的创意，繁杂而简洁的创意。">
<meta name="twitter:image" content="http://o88e8any8.bkt.clouddn.com/iOS_animate_effect.png?imageView/2/w/700">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-80507808-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body>
  <div id="container">
    <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo logo-text" href="/">Chars</a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/categories">Categories</a>
        
          <a class="main-nav-link" href="/tags">Tags</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
          <a class="main-nav-link" href="/atom.xml">Rss</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://charsdavy.github.io"></form>
        </div>
      </nav>
    </div>
  </div>
</header>
    <section id="main" class="outer"><article id="post-design-complex-animation-effect" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      设计复杂的iOS动画效果
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2016/07/31/design-complex-animation-effect/" class="article-date">
  <time datetime="2016-07-31T14:35:54.000Z" itemprop="datePublished">2016-07-31</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

<!--
      
        <div class="article-comment-link-wrap">
          <a href="http://charsdavy.github.io/2016/07/31/design-complex-animation-effect/#ds-thread" class="article-comment-link">Comments</a>
        </div>
      
-->
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>动画的世界丰富多彩，令人陶醉</p>
</blockquote>
<p>随着工作的深入，其实每个 App 中，最关键的莫过于用户交互，随着技术时代的发展，人们已经不再满足于手指点点碰碰就完成功能。用户更加期待炫酷的操作体验。需要眼前一亮的感觉。这些都是 App 将要解决的问题。而动画交互无疑是最多的一种手段。但是，现在也不是简单动画的天下，需要更多的创意，繁杂而简洁的创意。</p>
<a id="more"></a>
<h1 id="动画效果的UIView-Object"><a href="#动画效果的UIView-Object" class="headerlink" title="动画效果的UIView Object"></a>动画效果的UIView Object</h1><p><img src="http://o88e8any8.bkt.clouddn.com/iOS_animate_effect.png?imageView/2/w/700" alt="结构图"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 显示动画</span><br><span class="line">- (void)showWithDuration:(CGFloat)duration animated:(BOOL)animated;</span><br><span class="line"></span><br><span class="line">// 隐藏动画</span><br><span class="line">- (void)hideWithDuration:(CGFloat)duration animated:(BOOL)animated;</span><br><span class="line"></span><br><span class="line">// 创建view</span><br><span class="line">- (void)buildView;</span><br><span class="line"></span><br><span class="line">// 动画百分比（手动设置动画的程度）</span><br><span class="line">- (void)percent:(CGFloat)percent;</span><br></pre></td></tr></table></figure>
<h1 id="制定统一的动画接口"><a href="#制定统一的动画接口" class="headerlink" title="制定统一的动画接口"></a>制定统一的动画接口</h1><p>即：相关有动画效果的类，有同一的动画方法命名</p>
<ul>
<li>为了实现后续复杂的动画组合</li>
<li>后续的代码维护极为方便</li>
<li>优先考虑里氏代换原则</li>
</ul>
<h1 id="动画中的高内聚低耦合原理"><a href="#动画中的高内聚低耦合原理" class="headerlink" title="动画中的高内聚低耦合原理"></a>动画中的高内聚低耦合原理</h1><ul>
<li>高内聚：有动画效果的类，自身具有动画方法</li>
<li>不要把实现动画的细节暴露在外</li>
<li>设计动画类尽量要符合单一职能原则，以便后续方便组合成复杂的动画效果</li>
</ul>
<h1 id="设计动画函数的注意事项"><a href="#设计动画函数的注意事项" class="headerlink" title="设计动画函数的注意事项"></a>设计动画函数的注意事项</h1><ul>
<li>动画方法的命名统一</li>
<li>预留非动画情形的设计（tableView等reuse情况）</li>
<li>用百分比来表示动画的执行程度</li>
<li>懒加载的使用</li>
</ul>
<h1 id="动画效果就是frame值的重新设定"><a href="#动画效果就是frame值的重新设定" class="headerlink" title="动画效果就是frame值的重新设定"></a>动画效果就是frame值的重新设定</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[UIView animateWithDuration:duration animations:^&#123;</span><br><span class="line">        self.frame = self.midRect;</span><br><span class="line">        self.alpha = 1.f;</span><br><span class="line">    &#125;];</span><br></pre></td></tr></table></figure>
<h1 id="一个具有动画效果的类"><a href="#一个具有动画效果的类" class="headerlink" title="一个具有动画效果的类"></a>一个具有动画效果的类</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//  TranslateView.h</span><br><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">@interface TranslateView : UIView</span><br><span class="line"></span><br><span class="line">//** 显示动画 */</span><br><span class="line">- (void)show;</span><br><span class="line"></span><br><span class="line">/** 隐藏动画 */</span><br><span class="line">- (void)hide;</span><br><span class="line"></span><br><span class="line">/** 创建view */</span><br><span class="line">- (void)buildView;</span><br><span class="line"></span><br><span class="line">/** 动画百分比（手动设置动画的程度） */</span><br><span class="line">- (void)percent:(CGFloat)percent;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">//  TranslateView.m</span><br><span class="line">#import &quot;TranslateView.h&quot;</span><br><span class="line"></span><br><span class="line">@interface TranslateView ()</span><br><span class="line"></span><br><span class="line">@property (nonatomic) CGFloat offsetY;</span><br><span class="line">@property (nonatomic) CGRect startRect;</span><br><span class="line">@property (nonatomic) CGRect midRect;</span><br><span class="line">@property (nonatomic) CGRect endRect;</span><br><span class="line">@property (nonatomic) CGRect curRect;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation TranslateView</span><br><span class="line"></span><br><span class="line">- (instancetype)initWithFrame:(CGRect)frame &#123;</span><br><span class="line">    self = [super initWithFrame:frame];</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        self.alpha = 0.f;</span><br><span class="line">        self.offsetY = 20.0f;</span><br><span class="line">        self.backgroundColor = [UIColor blackColor];</span><br><span class="line">        [self buildView];</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 创建view</span><br><span class="line">- (void)buildView &#123;</span><br><span class="line">    self.startRect = self.frame;</span><br><span class="line">    self.midRect   = CGRectMake(self.startRect.origin.x,</span><br><span class="line">                                self.startRect.origin.y + self.offsetY,</span><br><span class="line">                                self.startRect.size.width,</span><br><span class="line">                                self.startRect.size.height);</span><br><span class="line">    self.endRect   = CGRectMake(self.startRect.origin.x,</span><br><span class="line">                                self.startRect.origin.y + self.offsetY * 2,</span><br><span class="line">                                self.startRect.size.width,</span><br><span class="line">                                self.startRect.size.height);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 显示动画</span><br><span class="line">- (void)showWithDuration:(CGFloat)duration animated:(BOOL)animated &#123;</span><br><span class="line">    if (animated == YES) &#123;</span><br><span class="line">        [UIView animateWithDuration:duration animations:^&#123;</span><br><span class="line">            self.frame = self.midRect;</span><br><span class="line">            self.alpha = 1.f;</span><br><span class="line">            self.curRect = self.frame;</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        self.frame = self.midRect;</span><br><span class="line">        self.alpha = 1.f;</span><br><span class="line">        self.curRect = self.frame;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 隐藏动画</span><br><span class="line">- (void)hideWithDuration:(CGFloat)duration animated:(BOOL)animated &#123;</span><br><span class="line">    if (animated == YES) &#123;</span><br><span class="line">        [UIView animateWithDuration:duration animations:^&#123;</span><br><span class="line">            self.frame = self.endRect;</span><br><span class="line">            self.alpha = 0.f;</span><br><span class="line">        &#125; completion:^(BOOL finished) &#123;</span><br><span class="line">            self.frame = self.startRect;</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        self.frame = self.startRect;</span><br><span class="line">        self.alpha = 0.f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 动画百分比（手动设置动画的程度）</span><br><span class="line">- (void)percent:(CGFloat)percent &#123;</span><br><span class="line">    CGFloat tmpOffsetY = 0;</span><br><span class="line">    CGFloat stateHeight = 20;</span><br><span class="line">    if (percent &lt;= 0) &#123;</span><br><span class="line">        tmpOffsetY = percent * self.offsetY;</span><br><span class="line">    &#125; else if (percent &gt;= 1) &#123;</span><br><span class="line">        tmpOffsetY = self.offsetY;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        tmpOffsetY = percent * self.offsetY;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (CGRectGetMinY(self.curRect) + tmpOffsetY &lt; stateHeight || CGRectGetMaxY(self.curRect) + tmpOffsetY &gt; CGRectGetHeight([UIScreen mainScreen].bounds)) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    self.frame = CGRectMake(self.curRect.origin.x,</span><br><span class="line">                            self.curRect.origin.y + tmpOffsetY,</span><br><span class="line">                            self.curRect.size.width,</span><br><span class="line">                            self.curRect.size.height);</span><br><span class="line">    self.curRect = self.frame;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)show</span><br><span class="line">&#123;</span><br><span class="line">    [self showWithDuration:2.0f animated:YES];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)hide</span><br><span class="line">&#123;</span><br><span class="line">    [self hideWithDuration:0.5f animated:YES];</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<h1 id="里氏代换原则处理动画类的继承问题"><a href="#里氏代换原则处理动画类的继承问题" class="headerlink" title="里氏代换原则处理动画类的继承问题"></a>里氏代换原则处理动画类的继承问题</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SourceView *tmpView = [[ChildTwoView alloc] init];</span><br><span class="line">[tmpView show];</span><br></pre></td></tr></table></figure>
<ul>
<li>里氏代换原则的基本原理 (多态)</li>
<li>设计中要确保父类可以直接调用子类的方法</li>
<li>将父类设计成虚类</li>
</ul>
<h2 id="什么是多态"><a href="#什么是多态" class="headerlink" title="什么是多态"></a>什么是多态</h2><h3 id="1-定义"><a href="#1-定义" class="headerlink" title="1.定义"></a>1.定义</h3><p>某一类事物的多种表现形态</p>
<h4 id="举例说明："><a href="#举例说明：" class="headerlink" title="举例说明："></a>举例说明：</h4><p>1）生活中：动物：猫—波斯猫</p>
<p>2）程序中：父类指针指向子类对象</p>
<h3 id="2-条件"><a href="#2-条件" class="headerlink" title="2.条件"></a>2.条件</h3><ul>
<li>子类继承父类</li>
<li>子类有重写父类的方法</li>
<li>父类指针指向子类对象</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">动物 a = [猫 alloc]init];</span><br><span class="line">动物 a = [狗 alloc]init];</span><br></pre></td></tr></table></figure>
<p><strong>表现形式：</strong>在父类指针指向不同的对象的时候，通过父类指针调用被重写的方法，会执行该指针所指向的那个对象的方法；</p>
<h3 id="3-实现"><a href="#3-实现" class="headerlink" title="3.实现"></a>3.实现</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@interface Computer : NSObject</span><br><span class="line">- (void)system;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface PC : Computer</span><br><span class="line">// 重写system方法</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface Mac : Computer</span><br><span class="line">// 重写system方法</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">Computer *com = nil;</span><br><span class="line"></span><br><span class="line">Computer = [PC alloc]init]; //实例化PC对象</span><br><span class="line">[PC system];</span><br><span class="line"></span><br><span class="line">Computer = [Mac alloc]init; //实例化Mac对象</span><br><span class="line">[Mac system]；</span><br></pre></td></tr></table></figure>
<h3 id="4-原理"><a href="#4-原理" class="headerlink" title="4.原理"></a>4.原理</h3><ul>
<li>id类型：通用对象指针类型，弱类型，编译的时候不进行具体的类型检查。</li>
<li>动态绑定：动态类型可以做到在程序直到执行时才确定对象的真实类型，进而确定需要调用那个对象方法。</li>
</ul>
<p>ObjC 不同于其他程序设计语言，它可以在运行的时候加入新的数据类型和新的程序模块，动态类型识别，动态绑定，动态加载。</p>
<h3 id="5-优点："><a href="#5-优点：" class="headerlink" title="5.优点："></a>5.优点：</h3><ul>
<li>多态最重要的优点在于简化了编程接口，何以理解?它允许在类和类之间重用一些习惯性的命名，而不是为每一个新加的函数命名一个新的名字。这样，编程接口就是一些抽象行为的集合，从而和实现接口的类区分开。</li>
<li>多态也使得代码可以分散在不同的对象中，而不用视图在一个函数中考虑到所有可能的对象。这样可以优化代码的扩展性和复用性。当一个新的情景出现时，无需对现有的代码进行改动，而只需要增加一个新的类和新的同名的方法。</li>
</ul>
<p><strong>详细参考</strong></p>
<p><a href="http://charsdavy.github.io/2015/09/26/Objc-inherit-multimodal/">Objective-C 继承和多态</a></p>
<h1 id="动画中的模块化设计"><a href="#动画中的模块化设计" class="headerlink" title="动画中的模块化设计"></a>动画中的模块化设计</h1><ul>
<li>动画效果实现难度的判断</li>
<li>将看到的动画效果拆分成小模块</li>
<li>将写好的小模块组合成你所需要的动画效果</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//ViewController.m</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">	[super viewDidLoad];</span><br><span class="line">	// Do any additional setup after loading the view, typically from a nib.</span><br><span class="line"></span><br><span class="line">	// 复杂的动画被写进了BaseAnimationView当中，没有暴露不必要的细节</span><br><span class="line">	BaseAnimationView *baseView = [[BaseAnimationView alloc] initWithFrame:CGRectZero];</span><br><span class="line">    [self.view addSubview:baseView];</span><br><span class="line">    [baseView show];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//BaseAnimationView.m</span><br><span class="line"></span><br><span class="line">- (void)show</span><br><span class="line">&#123;</span><br><span class="line">    [self.translateView show];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)hide</span><br><span class="line">&#123;</span><br><span class="line">    [self.translateView hide];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)buildView</span><br><span class="line">&#123;</span><br><span class="line">    self.translateView = [[TranslateView alloc] initWithFrame:CGRectMake(50, 100, 2, 50)];</span><br><span class="line">    [self addSubview:self.translateView];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)percent:(CGFloat)percent</span><br><span class="line">&#123;</span><br><span class="line">    [self.translateView percent:percent];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="延时执行某方法"><a href="#延时执行某方法" class="headerlink" title="延时执行某方法"></a>延时执行某方法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[self performSelector:@selector(excuteAfterDelay) withObject:nil afterDelay:6];</span><br></pre></td></tr></table></figure>
<h1 id="初始化UIView"><a href="#初始化UIView" class="headerlink" title="初始化UIView"></a>初始化UIView</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (instancetype)initWithFrame:(CGRect)frame &#123;</span><br><span class="line">	self = [super initWithFrame:frame];</span><br><span class="line">	if (self) &#123;</span><br><span class="line">		// ......</span><br><span class="line">	&#125;</span><br><span class="line">	return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/charsdavy/ManualAnimationDemo">Demo on Github</a></p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Animation/">Animation</a></li></ul>

      </footer>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/08/01/core-animation-vision-effect/" id="article-nav-newer" class="article-nav-link-wrap">
      <div class="article-nav-title"><span>&lt;</span>&nbsp;
        
          Core Animation (四) 视觉效果
        
      </div>
    </a>
  
  
    <a href="/2016/07/30/core-animation-geometry-layer/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Core Animation (三) 图层几何学&nbsp;<span>&gt;</span></div>
    </a>
  
</nav>

  
</article>




<div class="share_addthis">
  <div class="sharing addthis_toolbox share">
    <a class="addthis_button_facebook_like"></a>
    <a class="addthis_button_tweet"></a>
    <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-560c64c35486b3d4" async="async"></script>
</div>






<section id="comments">
  <!-- 多说评论框 start -->
  <div class="ds-thread" data-thread-key="post-design-complex-animation-effect" data-title="设计复杂的iOS动画效果" data-url="http://charsdavy.github.io/2016/07/31/design-complex-animation-effect/"></div>
  <!-- 多说评论框 end -->
  <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
  <script type="text/javascript">
  var duoshuoQuery = {short_name:'charsdavy'};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0] 
       || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
  <!-- 多说公共JS代码 end -->
</section>
</section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Chars Davy&nbsp;
     </div>
  </div>
</footer>

    

<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<div id="totop" style="position:fixed;bottom:30px;right:30px;cursor: pointer;">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>
<script src="/js/totop.js"></script>

  </div>
</body>
</html>