<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <!-- JQuery (used for bootstrap and jekyll search) -->
    <script src="/assets/js/jquery-3.2.1.min.js" ></script>
    
    <!-- Main JS (navbar.js and katex_init.js)-->
    <script defer=true src="/assets/js/main.min.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!--Favicon-->
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

    <!-- Canonical -->
    <link rel="canonical" href="http://chars.tech/ml/2017/06/08/tensorflow-primer-guide.html">

    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="Chars" href="http://chars.tech///feed.xml"/>

    <!-- Font Awesome -->
    <!-- <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> -->
    <link rel="stylesheet" type="text/css" href="/assets/css/font-awesome.min.css">

    <!-- Google Fonts -->
    
    <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css"> 
    

    <!-- KaTeX 0.8.3 -->
    
    <!--<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.3/katex.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.3/katex.min.js"></script> -->
    <link rel="stylesheet" type="text/css" href="/assets/css/katex.min.css">
    <script src="/assets/js/katex.min.js">
    </script>
    

    <!-- Google Analytics -->
    
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-80507808-1', 'auto');
        ga('send', 'pageview');

    </script>
    
    
    <!-- seo tags -->
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>初探 TensorFlow</title>
<meta name="generator" content="Jekyll v3.7.2" />
<meta property="og:title" content="初探 TensorFlow" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="TensorFlow 是一个采用数据流图（data flow graphs），用于数值计算的开源软件库。节点（Nodes）在图中表示数学操作，图中的线（edges）则表示在节点间相互联系的多维数据数组，即张量（tensor）。它灵活的架构让你可以在多种平台上展开计算，例如台式计算机中的一个或多个CPU（或GPU），服务器，移动设备等等。TensorFlow 最初由Google大脑小组（隶属于Google机器智能研究机构）的研究员和工程师们开发出来，用于机器学习和深度神经网络方面的研究，但这个系统的通用性使其也可广泛用于其他计算领域。" />
<meta property="og:description" content="TensorFlow 是一个采用数据流图（data flow graphs），用于数值计算的开源软件库。节点（Nodes）在图中表示数学操作，图中的线（edges）则表示在节点间相互联系的多维数据数组，即张量（tensor）。它灵活的架构让你可以在多种平台上展开计算，例如台式计算机中的一个或多个CPU（或GPU），服务器，移动设备等等。TensorFlow 最初由Google大脑小组（隶属于Google机器智能研究机构）的研究员和工程师们开发出来，用于机器学习和深度神经网络方面的研究，但这个系统的通用性使其也可广泛用于其他计算领域。" />
<link rel="canonical" href="http://chars.tech/ml/2017/06/08/tensorflow-primer-guide.html" />
<meta property="og:url" content="http://chars.tech/ml/2017/06/08/tensorflow-primer-guide.html" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-06-08T07:45:11+08:00" />
<script type="application/ld+json">
{"description":"TensorFlow 是一个采用数据流图（data flow graphs），用于数值计算的开源软件库。节点（Nodes）在图中表示数学操作，图中的线（edges）则表示在节点间相互联系的多维数据数组，即张量（tensor）。它灵活的架构让你可以在多种平台上展开计算，例如台式计算机中的一个或多个CPU（或GPU），服务器，移动设备等等。TensorFlow 最初由Google大脑小组（隶属于Google机器智能研究机构）的研究员和工程师们开发出来，用于机器学习和深度神经网络方面的研究，但这个系统的通用性使其也可广泛用于其他计算领域。","@type":"BlogPosting","url":"http://chars.tech/ml/2017/06/08/tensorflow-primer-guide.html","headline":"初探 TensorFlow","dateModified":"2017-06-08T07:45:11+08:00","datePublished":"2017-06-08T07:45:11+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://chars.tech/ml/2017/06/08/tensorflow-primer-guide.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <!-- Manual seo tags -->
    <!--
    <title>初探 TensorFlow | Chars</title>
    <meta name="description" content="TensorFlow 是一个采用数据流图（data flow graphs），用于数值计算的开源软件库。节点（Nodes）在图中表示数学操作，图中的线（edges）则表示在节点间相互联系的多维数据数组，即张量（tensor）。它灵活的架构让你可以在多种平台上展开计算，例如台式计算机中的一个或多个CPU（或GPU）...">
    -->
</head>

  <body>
    <header class="site-header">
    
    <!-- Logo and title -->
	<div class="branding">
		<a href="/">
			<img class="avatar" src="/assets/img/avatar.png" alt=""/>
		</a>

		<h1 class="site-title">
			<a href="/">Chars</a>
		</h1>
	</div>
    
    <!-- Toggle menu -->
    <nav class="clear">
    <a id="pull" class="toggle" href="#">
    <i class="fa fa-bars fa-lg"></i>
    </a>
    
    <!-- Menu -->
    <ul>
        
        
        
        
        <li>
            <a class="clear" href="/about/">
                About
            </a>
        </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
         
        
        
        <li>
            <a class="clear" href="http://chars.tech/hobby">
                Hobby
            </a>
        </li>
        
        
        <li>
            <a class="clear" href="http://chars.tech/search">
                <i class="fa fa-search" aria-hidden="true"></i>
            </a>
        </li>
        
        
        <li>
            <a class="clear" href="http://chars.tech/tags">
                <i class="fa fa-tags" aria-hidden="true"></i>
            </a>
        </li>
        
        
    </ul>
        
	</nav>
</header>

    <div class="content">
      <article >
  <header id="main" style="background-image: url('/')">
    <h1 id="%E5%88%9D%E6%8E%A2+TensorFlow" class="title">初探 TensorFlow</h1>
    <p class="meta">
    June 8, 2017
    
    </p>
  </header>
  <section class="post-content"><p>TensorFlow 是一个采用数据流图（data flow graphs），用于数值计算的开源软件库。节点（Nodes）在图中表示数学操作，图中的线（edges）则表示在节点间相互联系的多维数据数组，即张量（tensor）。它灵活的架构让你可以在多种平台上展开计算，例如台式计算机中的一个或多个CPU（或GPU），服务器，移动设备等等。TensorFlow 最初由Google大脑小组（隶属于Google机器智能研究机构）的研究员和工程师们开发出来，用于机器学习和深度神经网络方面的研究，但这个系统的通用性使其也可广泛用于其他计算领域。</p>

<p><img src="http://o88e8any8.bkt.clouddn.com/tensors_flowing.gif" alt="tensors_flowing" /></p>

<h2 id="什么是数据流图data-flow-graph">什么是数据流图（Data Flow Graph）</h2>
<p>数据流图用“结点”(nodes)和“线”(edges)的有向图来描述数学计算。“节点” 一般用来表示施加的数学操作，但也可以表示数据输入(feed in)的起点/输出(push out)的终点，或者是读取/写入持久变量(persistent variable)的终点。“线”表示“节点”之间的输入/输出关系。这些数据“线”可以输运“size可动态调整”的多维数据数组，即“张量”(tensor)。张量从图中流过的直观图像是这个工具取名为“Tensorflow”的原因。一旦输入端的所有张量准备好，节点将被分配到各种计算设备完成异步并行地执行运算。</p>

<h2 id="tensorflow的特征">TensorFlow的特征</h2>
<ul>
  <li>高度的灵活性</li>
  <li>真正的可移植性（Portability）</li>
  <li>将科研和产品联系在一起</li>
  <li>自动求微分</li>
  <li>多语言支持</li>
  <li>性能最优化</li>
</ul>

<h2 id="下载与安装">下载与安装</h2>

<h3 id="源码安装">源码安装</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># --recurse-submodules 参数是必须的, 用于获取 TesorFlow 依赖的 protobuf 库
$ git clone --recurse-submodules https://github.com/tensorflow/tensorflow
</code></pre></div></div>

<h4 id="linux-安装">Linux 安装</h4>

<h5 id="安装-bazel">安装 Bazel</h5>

<p>首先依照 <a href="https://bazel.build/versions/master/docs/install.html">教程</a> 安装 Bazel 的依赖. 然后使用下列命令下载和编译 Bazel 的源码:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone https://github.com/bazelbuild/bazel.git
$ cd bazel
$ git checkout tags/0.1.0
$ ./compile.sh
</code></pre></div></div>

<p>上面命令中拉取的代码标签为 0.1.0, 兼容 Tensorflow 目前版本. bazel 的HEAD 版本 (即最新版本) 在这里可能不稳定.</p>

<p>将执行路径 <code class="highlighter-rouge">output/bazel</code> 添加到 <code class="highlighter-rouge">$PATH</code> 环境变量中.</p>

<h5 id="安装其他依赖">安装其他依赖</h5>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo apt-get install python-numpy swig python-dev
</code></pre></div></div>

<h4 id="mac-os-x-安装">Mac OS X 安装</h4>

<p>Mac 和 Linux 需要的软件依赖完全一样, 但是安装过程区别很大. 以下链接用于帮助你 在 Mac OS X 上安装这些依赖:</p>

<h5 id="bazel">Bazel</h5>

<p>参见<a href="https://bazel.build/versions/master/docs/install.html">网页</a>的 Mac OS X 安装指南.</p>

<h5 id="swig">SWIG</h5>

<p><a href="http://www.swig.org/Doc3.0/Preface.html#Preface_osx_installation">Mac OS X 安装教程</a></p>

<p>注意: 你需要安装<a href="ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/">PCRE</a>, 而不是 PCRE2.</p>

<h5 id="numpy">Numpy</h5>

<p>参见<a href="https://docs.scipy.org/doc/numpy/user/install.html">安装教程</a>.</p>

<h5 id="创建-pip-包并安装">创建 pip 包并安装</h5>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bazel build -c opt //tensorflow/tools/pip_package:build_pip_package

$ bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg

# .whl 文件的实际名字与你所使用的平台有关
$ pip install /tmp/tensorflow_pkg/tensorflow-0.5.0-cp27-none-linux_x86_64.whl
</code></pre></div></div>

<h3 id="二进制安装">二进制安装</h3>

<p>TensorFlow Python API 依赖 Python 2.7 版本.</p>

<p>在 Linux 和 Mac 下最简单的安装方式, 是使用 <a href="https://pypi.python.org/pypi/pip">pip</a> 安装.</p>

<p>为了简化安装步骤, 建议使用 virtualenv, 具体安装方法在后文具体说明.</p>

<h4 id="ubuntulinux">Ubuntu/Linux</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># 仅使用 CPU 的版本
$ pip install https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.5.0-cp27-none-linux_x86_64.whl

# 开启 GPU 支持的版本 (安装该版本的前提是已经安装了 CUDA sdk)
$ pip install https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.5.0-cp27-none-linux_x86_64.whl
</code></pre></div></div>

<h4 id="mac-os-x">Mac OS X</h4>

<p>在 OS X 系统上, 推荐先安装 <a href="https://brew.sh/">homebrew</a>, 然后执行 <code class="highlighter-rouge">brew install python</code>, 以便能够使用 homebrew 中的 Python 安装 TensorFlow. 另外一种推荐的方式是在 virtualenv 中安装 TensorFlow.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># 当前版本只支持 CPU
$ pip install https://storage.googleapis.com/tensorflow/mac/tensorflow-0.5.0-py2-none-any.whl
</code></pre></div></div>

<h4 id="基于-virtualenv-的安装">基于 VirtualEnv 的安装</h4>

<p>推荐使用 <a href="https://pypi.python.org/pypi/virtualenv">virtualenv</a> 创建一个隔离的容器, 来安装 TensorFlow. 这是可选的, 但是这样做能使排查安装问题变得更容易.</p>

<p>首先, 安装所有必备工具:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># 在 Linux 上:
$ sudo apt-get install python-pip python-dev python-virtualenv

# 在 Mac 上:
$ sudo easy_install pip  # 如果还没有安装 pip
$ sudo pip install --upgrade virtualenv
</code></pre></div></div>

<p>接下来, 建立一个全新的 virtualenv 环境. 为了将环境建在 ~/tensorflow 目录下, 执行:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ virtualenv --system-site-packages ~/tensorflow
$ cd ~/tensorflow
</code></pre></div></div>
<p>然后, 激活 virtualenv:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ source bin/activate  # 如果使用 bash
$ source bin/activate.csh  # 如果使用 csh
(tensorflow)$  # 终端提示符应该发生变化
</code></pre></div></div>
<p>在 virtualenv 内, 安装 TensorFlow:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(tensorflow)$ pip install --upgrade &lt;$url_to_binary.whl&gt;
</code></pre></div></div>
<p>接下来, 使用类似命令运行 TensorFlow 程序:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(tensorflow)$ cd tensorflow/models/image/mnist
(tensorflow)$ python convolutional.py

# 当使用完 TensorFlow
(tensorflow)$ deactivate  # 停用 virtualenv

$  # 你的命令提示符会恢复原样
</code></pre></div></div>

<h2 id="运行-tensorflow">运行 TensorFlow</h2>

<p>打开一个 python 终端:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python

&gt;&gt;&gt; import tensorflow as tf
&gt;&gt;&gt; hello = tf.constant('Hello, TensorFlow!')
&gt;&gt;&gt; sess = tf.Session()
&gt;&gt;&gt; print sess.run(hello)
Hello, TensorFlow!
&gt;&gt;&gt; a = tf.constant(10)
&gt;&gt;&gt; b = tf.constant(32)
&gt;&gt;&gt; print sess.run(a+b)
42
&gt;&gt;&gt;
</code></pre></div></div>
</section>
   
   <!-- Tag list -->
  
  


    <footer>
        <div class="tag-list">
        
          <div class="meta">Tags</div>
        
            
        
          <a class="button" href="/tags#python">
            <p><i class="fa fa-tag fa-fw"></i> python</p>
          </a>
        
          <a class="button" href="/tags#tensorflow">
            <p><i class="fa fa-tag fa-fw"></i> tensorflow</p>
          </a>
        
        </div>
    </footer>
  

    
</article>

<!-- comment -->

<div class="comments">
  <!-- 来必力City版安装代码 -->
<div id="lv-container" data-id="city" data-uid=MTAyMC8zMzY4My8xMDIzOA==>
<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
</script>
<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->
</div>


<!-- Post navigation -->

  <div id="post-nav">
  
  <div id="previous-post" class="post-nav-post">
      <p>Previous</p>
      <a href="/web/2017/05/29/mysql-advanced-study.html">
        拆解 MySQL 的高阶使用与概念
      </a>
  </div>
  
  
  <div id="next-post" class="post-nav-post">
      <p>Next</p>
      <a href="/algorithm/2017/06/10/binary-search-tree.html">
        聊聊「二叉搜索树」的那些事儿
      </a>
  </div>
  
</div>

    </div>
    
<footer class="site-footer">
    <p class="text"></p>
    <p class="text">Powered by <a href="https://jekyllrb.com/">Jekyll</a>. Theme by <a href="https://github.com/charsdavy/Type-on-Strap">Type-on-Strap</a>. &copy; 2016 - 2018 </p>
            <div class="footer-icons">
                <ul>
                <!-- Social icons from Font Awesome, if enabled -->
                
<li>
	<a href="http://chars.tech////feed.xml" title="Follow RSS feed">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>



<li>
	<a href="mailto:chars.davy@gmail.com" title="Email">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>









<li>
	<a href="https://www.facebook.com/wei.deng.1460" title="Follow on Facebook">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>





<li>
	<a href="https://github.com/charsdavy" title="Follow on GitHub">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-github fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>

























<li>
	<a href="https://twitter.com/charsdavy" title="Follow on Twitter" class="type">
        <span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>



<li>
    <a href="https://weibo.com/u/3875245858" title="Follow on Weibo" class="type">
        <span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>








                </ul>
            </div>
</footer>




  </body>
</html>
